<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Recipe Form</title>
    <style>
        body {
            font-family: Arial, sans-serif;
            background-color: #f4f4f4;
            margin: 0;
            padding: 0;
            display: flex;
            justify-content: center;
            align-items: center;
            height: 100vh;
        }

        form {
            background-color: #fff;
            padding: 20px;
            border-radius: 8px;
            box-shadow: 0 0 10px rgba(0, 0, 0, 0.1);
        }

        label {
            display: block;
            margin-bottom: 8px;
        }

        input,
        select,
        textarea {
            width: 100%;
            padding: 8px;
            margin-bottom: 16px;
            box-sizing: border-box;
        }

        select {
            width: calc(100% - 16px);
            /* Adjusted width for select elements */
        }

        button {
            background-color: #4caf50;
            color: #fff;
            padding: 10px 15px;
            border: none;
            border-radius: 4px;
            cursor: pointer;
        }

        button:hover {
            background-color: #45a049;
        }

        .ingredient-section {
            margin-bottom: 20px;
            border: 1px solid #ccc;
            padding: 10px;
            border-radius: 8px;
        }

        .ingredient-container,
        .instruction-container {
            margin-bottom: 10px;
        }
    </style>
</head>

<body>

    <form id="recipeForm">
        <label for="title">Title:</label>
        <input type="text" id="title" name="title" required>

        <label for="prepTime">Prep Time:</label>
        <input type="text" id="prepTime" name="prepTime" required>

        <label for="cookTime">Cook Time:</label>
        <input type="text" id="cookTime" name="cookTime" required>

        <label for="difficulty">Difficulty:</label>
        <input type="text" id="difficulty" name="difficulty" required>

        <label for="serves">Serves:</label>
        <input type="number" id="serves" name="serves" required>

        <label for="dishType">Dish Type:</label>
        <input type="text" id="dishType" name="dishType" required>

        <label for="isVegetarian">Is Vegetarian:</label>
        <select id="isVegetarian" name="isVegetarian">
            <option value="yes">Yes</option>
            <option value="no">No</option>
        </select>

        <label for="isVegan">Is Vegan:</label>
        <select id="isVegan" name="isVegan">
            <option value="yes">Yes</option>
            <option value="no">No</option>
        </select>

        <!-- Ingredients Section -->
        <hr>
        <h2>Ingredients:</h2>
        <div id="ingredientSections">
            <!-- Ingredient sections will be dynamically added here -->
        </div>
        <button type="button" onclick="addIngredientSection()">Add Ingredient Section</button>
        <hr>

        <!-- Instructions Section -->
        <label for="instructions">Instructions:</label>
        <div id="instructionContainer">
            <!-- Instruction fields will be dynamically added here -->
            <textarea id="instructions" name="instructions" rows="4" required></textarea>
        </div>
        <button type="button" onclick="addInstruction()">Add Instruction</button>

        <hr>

        <label for="image">Image URL:</label>
        <input type="text" id="image" name="image" required>

        <button type="button" onclick="submitRecipe()">Submit Recipe</button>
    </form>

    <script>
        function addIngredientSection() {
            const ingredientSections = document.getElementById('ingredientSections');

            // Create a new ingredient section
            const newIngredientSection = document.createElement('div');
            newIngredientSection.className = 'ingredient-section';

            // Add input field for the section name
            newIngredientSection.innerHTML = `
        <label for="sectionName">Ingredient Section Name:</label>
        <input type="text" name="sectionName" required>
      `;

            // Create a container for ingredients within the section
            const ingredientContainer = document.createElement('div');
            ingredientContainer.className = 'ingredient-container';
            newIngredientSection.appendChild(ingredientContainer);

            // Add input fields for quantity, measurement, and ingredient
            ingredientContainer.innerHTML = `
        <label for="quantity">Quantity:</label>
        <input type="number" name="quantity" required>
        
        <label for="measurement">Measurement:</label>
        <input type="text" name="measurement" required>
        
        <label for="ingredient">Ingredient:</label>
        <input type="text" name="ingredient" required>
      `;

            // Add button to dynamically add more ingredients
            const addIngredientButton = document.createElement('button');
            addIngredientButton.type = 'button';
            addIngredientButton.textContent = 'Add Ingredient';
            addIngredientButton.onclick = function () {
                addIngredient(ingredientContainer);
            };
            newIngredientSection.appendChild(addIngredientButton);

            // Append the new ingredient section to the container
            ingredientSections.appendChild(newIngredientSection);
        }

        function addIngredient(container) {
            // Create a container for the new ingredient
            const ingredientContainer = document.createElement('div');
            ingredientContainer.className = 'ingredient-container';

            // Add input fields for quantity, measurement, and ingredient
            ingredientContainer.innerHTML = `
        <label for="quantity">Quantity:</label>
        <input type="number" name="quantity" required>
        
        <label for="measurement">Measurement:</label>
        <input type="text" name="measurement" required>
        
        <label for="ingredient">Ingredient:</label>
        <input type="text" name="ingredient" required>
      `;

            // Append the new ingredient container to the section's container
            container.appendChild(ingredientContainer);
        }

        function addInstruction() {
            // Create a container for the new instruction
            const instructionContainer = document.getElementById('instructionContainer');

            // Add textarea for the new instruction
            const newInstruction = document.createElement('div');
            newInstruction.className = 'instruction-container';
            newInstruction.innerHTML = `
        <label for="instruction">Instruction:</label>
        <textarea name="instruction" rows="4" required></textarea>
      `;

            // Append the new instruction container to the instructions container
            instructionContainer.appendChild(newInstruction);
        }

        function submitRecipe() {
            // Get values from the form and construct the recipe object
            const recipe = {
                title: document.getElementById('title').value,
                prepTime: document.getElementById('prepTime').value,
                cookTime: document.getElementById('cookTime').value,
                difficulty: document.getElementById('difficulty').value,
                serves: parseInt(document.getElementById('serves').value),
                dishType: document.getElementById('dishType').value,
                isVegetarian: document.getElementById('isVegetarian').value === 'yes',
                isVegan: document.getElementById('isVegan').value === 'yes',
                ingredients: getIngredients(),
                instructions: getInstructions(),
                image: document.getElementById('image').value,
            };

            // Add the new recipe to the recipes object or do something else with it
            console.log(recipe);
        }

        function getIngredients() {
            // Get all ingredient sections
            const ingredientSections = document.getElementsByClassName('ingredient-section');
            const ingredients = {};

            // Iterate over each ingredient section and gather values
            for (const section of ingredientSections) {
                const sectionName = section.querySelector('input[name="sectionName"]').value;
                const quantityInputs = section.querySelectorAll('input[name="quantity"]');
                const measurementInputs = section.querySelectorAll('input[name="measurement"]');
                const ingredientInputs = section.querySelectorAll('input[name="ingredient"]');

                // Initialize array for ingredients within the section
                ingredients[sectionName] = [];

                // Iterate over each input field for quantity, measurement, and ingredient
                for (let i = 0; i < quantityInputs.length; i++) {
                    const quantity = quantityInputs[i].value;
                    const measurement = measurementInputs[i].value;
                    const ingredient = ingredientInputs[i].value;

                    // Add the ingredient to the object using the section name as the key
                    ingredients[sectionName].push({ quantity, measurement, ingredient });
                }
            }

            return ingredients;
        }

        function getInstructions() {
            // Get all instruction containers
            const instructionContainers = document.querySelectorAll('.instruction-container');
            const instructions = [];

            // Iterate over each instruction container and gather values
            for (const container of instructionContainers) {
                const instruction = container.querySelector('textarea[name="instruction"]').value;
                instructions.push(instruction);
            }

            return instructions;
        }
    </script>

</body>

</html>